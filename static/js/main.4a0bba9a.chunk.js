(this.webpackJsonpcliente=this.webpackJsonpcliente||[]).push([[0],{36:function(e,a,t){e.exports=t(65)},41:function(e,a,t){},65:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),o=t(31),c=t.n(o),l=(t(41),t(12)),s=t(11),u=t(35),i=Object(r.createContext)(),m=function(e){var a=e.component,t=Object(u.a)(e,["component"]),o=Object(r.useContext)(i),c=o.autenticado,l=o.cargando,m=o.ObtenerUsuarioAutenticadoFn;return Object(r.useEffect)((function(){m()}),[]),n.a.createElement(s.b,Object.assign({},t,{render:function(e){return c||l?n.a.createElement(a,e):n.a.createElement(s.a,{to:"/"})}}))},p=t(9),d=t(1),E=t(4),f=Object(r.createContext)();function b(e){var a=Object(r.useContext)(f),t=a.alerta,o=a.mostrarAlertaFn,c=Object(r.useContext)(i),s=c.autenticado,u=c.mensaje,m=c.iniciarSesionFn,b=Object(r.useState)({email:"",password:""}),y=Object(E.a)(b,2),O=y[0],v=y[1],g=O.email,R=O.password,j=function(e){v(Object(d.a)({},O,Object(p.a)({},e.target.name,e.target.value)))};Object(r.useEffect)((function(){""===O.email||""===O.password?document.querySelector(".btn-dinamico").style.display="none":document.querySelector(".btn-dinamico").style.display="block"}),[O]),Object(r.useEffect)((function(){s&&e.history.push("/mis-proyectos"),u&&o("".concat(u.msg,". (").concat(u.value,")"),u.categoria)}),[s,u,e.history]);return n.a.createElement("div",{className:"form-usuario"},n.a.createElement("div",{className:"contenedor-form sombra-dark"},n.a.createElement("h1",null,"Iniciar Sesi\xf3n"),t?n.a.createElement("div",{className:"alert ".concat(t.categoria," alertas")},t.msg):null,n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==g.trim()&&""!==R.trim()?m({email:g,password:R}):o('No dejes campos vac\xedos (Ej: " ").',"alert-danger")}},n.a.createElement("div",{className:"campo-form"},n.a.createElement("div",{className:"form-icon"},n.a.createElement("i",{className:"far fa-envelope"})),n.a.createElement("input",{type:"email",name:"email",id:"email",onChange:j,value:g,placeholder:"Tu correo"})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("div",{className:"form-icon"},n.a.createElement("i",{className:"fas fa-lock"}),"                        "),n.a.createElement("input",{type:"password",name:"password",id:"password",onChange:j,value:R,placeholder:"Tu contrase\xf1a"})),n.a.createElement("input",{type:"submit",className:"btn btn-dinamico btn-primario btn-block",value:"Iniciar Sesi\xf3n"})),n.a.createElement("p",{className:"enlace-cuenta text-muted"},"Click",n.a.createElement(l.b,{className:"mx-2 font-weight-bold",to:"/nueva-cuenta"},"Crear cuenta"),"si no tienes una.")))}function y(e){var a=Object(r.useContext)(f),t=a.alerta,o=a.mostrarAlertaFn,c=Object(r.useContext)(i),s=c.autenticado,u=c.mensaje,m=c.registrarUsuarioFn,b=Object(r.useState)({nombre:"",email:"",password:"",confirmar:""}),y=Object(E.a)(b,2),O=y[0],v=y[1],g=O.nombre,R=O.email,j=O.password,h=O.confirmar,N=function(e){v(Object(d.a)({},O,Object(p.a)({},e.target.name,e.target.value)))};Object(r.useEffect)((function(){""===O.nombre||""===O.email||""===O.password||""===O.confirmar?document.querySelector(".btn-dinamico").style.display="none":document.querySelector(".btn-dinamico").style.display="block"}),[O]),Object(r.useEffect)((function(){s&&e.history.push("/mis-proyectos"),u&&o("".concat(u.msg,". (").concat(u.value,")"),u.categoria)}),[s,u,e.history]);return n.a.createElement("div",{className:"form-usuario"},n.a.createElement("div",{className:"contenedor-form sombra-dark"},n.a.createElement("h1",null,"Crear Cuenta"),t?n.a.createElement("div",{className:"alert ".concat(t.categoria," alertas")},t.msg):null,n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==g.trim()&&""!==R.trim()&&""!==j.trim()&&""!==h.trim()?j.length<8?o("Contrase\xf1a muy corta.","alert-danger"):j===h?m({nombre:g,email:R,password:j}):o("Las contrase\xf1as no son iguales.","alert-danger"):o('No dejes campos vac\xedos (Ej: " ").',"alert-danger")}},n.a.createElement("div",{className:"campo-form"},n.a.createElement("div",{className:"form-icon"},n.a.createElement("i",{className:"far fa-user"})),n.a.createElement("input",{type:"text",name:"nombre",id:"nombre",onChange:N,value:g,placeholder:"Tu nombre y primer apellido"})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("div",{className:"form-icon"},n.a.createElement("i",{className:"far fa-envelope"})),n.a.createElement("input",{type:"email",name:"email",id:"email",onChange:N,value:R,placeholder:"Tu correo"})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("div",{className:"form-icon"},n.a.createElement("i",{className:"fas fa-unlock-alt"}),"                        "),n.a.createElement("input",{type:"password",name:"password",id:"password",onChange:N,value:j,placeholder:"Tu contrase\xf1a"})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("div",{className:"form-icon"},n.a.createElement("i",{className:"fas fa-lock"}),"                        "),n.a.createElement("input",{type:"password",name:"confirmar",id:"confirmar",onChange:N,value:h,placeholder:"Confirma contrase\xf1a"})),n.a.createElement("input",{type:"submit",className:"btn-dinamico btn btn-primario btn-block",value:"Crear Cuenta"})),n.a.createElement("p",{className:"enlace-cuenta text-muted"},"Click",n.a.createElement(l.b,{className:"mx-2 font-weight-bold",to:"/"},"Iniciar Sesi\xf3n"),"si ya tienes una.")))}var O=Object(r.createContext)(),v=Object(r.createContext)();function g(){var e=Object(r.useContext)(O),a=Object(r.useContext)(v),t=Object(r.useContext)(f),o=e.newProyectoForm,c=e.mensaje,l=e.proyectoActual,s=e.proyectoEditar,u=e.proyectoEditarFn,i=e.actualizarProyectoFn,m=e.mostrarFormularioFn,b=e.ocultarFormularioFn,y=e.crearProyectoFn,g=t.alerta,R=t.mostrarAlertaFn,j=a.obtenerTareasFn,h=Object(r.useState)({nombre:""}),N=Object(E.a)(h,2),A=N[0],T=N[1],C=A.nombre;Object(r.useEffect)((function(){l&&(T({nombre:l.nombre}),j(l._id))}),[l]),Object(r.useEffect)((function(){c&&R(c.msg,c.categoria)}),[c]);return n.a.createElement(r.Fragment,null,n.a.createElement("button",{onClick:function(e){e.preventDefault(),m(),T({nombre:""}),u(!1)},type:"button",className:"btn btn-block btn-primario"},"Nuevo proyecto ",n.a.createElement("i",{className:"fas fa-plus"})),o?n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),C.trim().length<5?R("El nombre es muy corto!","alert-warning"):s?(l.nombre=A.nombre,i(l)):y(A)},className:"formulario-nuevo-proyecto"},n.a.createElement("div",{className:"row d-flex justify-content-center"},n.a.createElement("input",{type:"text",className:"col-8 newProyecto input-text",placeholder:"Nombre del proyecto",name:"nombre",onChange:function(e){T(Object(d.a)({},A,Object(p.a)({},e.target.name,e.target.value))),""===e.target.value?document.querySelector(".btn-dinamico").style.display="none":document.querySelector(".btn-dinamico").style.display="block"},value:C,autoFocus:!0}),n.a.createElement("button",{onClick:function(e){e.preventDefault(),b()},className:"col-2 form-icon rounded-right"},n.a.createElement("i",{className:"fas fa-times"}))),n.a.createElement("input",{type:"submit",className:"btn-dinamico btn btn-primario btn-block",value:s?"Actualizar proyecto":"Agregar proyecto"})):null,g?n.a.createElement("div",{className:"alert ".concat(g.categoria," alerta-responsive mt-2")},g.msg):null)}function R(e){var a=e.proyecto,t=Object(r.useContext)(O),o=t.proyectoActualFn,c=t.proyectoEditarFn;return n.a.createElement("li",{className:"row m-0"},n.a.createElement("button",{onClick:function(){o(a)},type:"button",className:"btn btn-blank col-10 text-left p-3"},a.nombre),n.a.createElement("button",{onClick:function(){o(a),c(!0)},type:"button",className:"col-2 p-1 border-0"},n.a.createElement("i",{className:"fas fa-pencil-alt"})))}function j(){var e=Object(r.useContext)(O),a=e.proyectos,t=e.obtenerProyectosFn;return Object(r.useEffect)((function(){t()}),[]),0===a.length?n.a.createElement("p",{className:"text-center text-muted"},"No tienes proyectos"):n.a.createElement("ul",{className:"listado-proyectos overflow-auto",style:{height:"30vh"}},a.map((function(e){return n.a.createElement(R,{key:e._id,proyecto:e})})))}function h(){return n.a.createElement("aside",{className:"sombra-dark"},n.a.createElement("h1",null,"MERN",n.a.createElement("span",null,"Tasks")),n.a.createElement(g,null),n.a.createElement("div",{className:"proyectos"},n.a.createElement("h2",null,"Mis proyectos"),n.a.createElement(j,null)))}function N(){var e=Object(r.useContext)(i),a=e.usuario,t=e.cerrarSesionFn;return n.a.createElement("header",{className:"app-header sombra"},n.a.createElement("p",{className:"nombre-usuario"},"Hola",n.a.createElement("span",{className:"text-capitalize"},a?" "+a.nombre:null)),n.a.createElement("nav",{className:"nav-principal"},n.a.createElement("button",{className:"cerrar-sesion",onClick:function(){return t()}},n.a.createElement("span",{className:"d-none d-md-block float-left mr-2"},"Cerrar Sesi\xf3n"),n.a.createElement("i",{className:"fas fa-sign-out-alt"}))))}function A(){var e=Object(r.useContext)(O),a=Object(r.useContext)(v),t=Object(r.useContext)(f),o=e.proyectoActual,c=a.actualizarTareaFn,l=a.tareaEditar,s=a.agregarTareaFn,u=a.mensaje,i=t.mostrarAlertaFn,m=Object(r.useState)({nombre:""}),b=Object(E.a)(m,2),y=b[0],g=b[1];Object(r.useEffect)((function(){g(null!==l?l:{nombre:""})}),[l]),Object(r.useEffect)((function(){u&&i(u.msg,u.categoria)}),[u]);var R=y.nombre;if(null===o)return n.a.createElement("h2",{className:"text-white title mt-5"},"Seleciona un proyecto, ",n.a.createElement("span",{className:"font-weight-normal"},"para empezar."));return n.a.createElement("div",{className:"formulario"},n.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),""===R.trim())return i("Nombre obligatorio.","alert-warning"),null;null===l?(y.proyecto=o._id,s(y)):c(y),g({nombre:""})}},n.a.createElement("div",{className:"contenedor-input"},n.a.createElement("input",{onChange:function(e){g(Object(d.a)({},y,Object(p.a)({},e.target.name,e.target.value)))},type:"text",className:"input-text text-muted",placeholder:"Nombrar tarea",value:R,name:"nombre"})),n.a.createElement("div",{className:"contenedor-input"},n.a.createElement("input",{type:"submit",className:"btn btn-primario btn-submit btn-block",value:l?"Editar tarea":"Agregar tarea"}))))}function T(e){var a=e.tarea,t=Object(r.useContext)(O),o=Object(r.useContext)(v),c=t.proyectoActual,l=o.actualizarTareaFn,s=o.obtenerTareaEditarFn,u=o.eliminarTareaFn,i=function(e){e.estado?e.estado=!1:e.estado=!0,l(e)};return n.a.createElement("li",{className:"tarea sombra"},n.a.createElement("p",{className:"m-0 font-weight-bold text-muted"},a.nombre),n.a.createElement("div",{className:"estado"},a.estado?n.a.createElement("button",{type:"button",onClick:function(){return i(a)},className:"completo"},"completo"):n.a.createElement("button",{type:"button",onClick:function(){return i(a)},className:"incompleto"},"Incompleto")),n.a.createElement("div",{className:"acciones"},n.a.createElement("button",{onClick:function(){return function(e){s(e)}(a)},type:"button",className:"btn btn-primario"},n.a.createElement("i",{className:"fas fa-pencil-alt"})),n.a.createElement("button",{onClick:function(){return e=a._id,void u(e,c._id);var e},type:"button",className:"btn btn-secundario"},n.a.createElement("i",{className:"fas fa-eraser"}))))}function C(){var e=Object(r.useContext)(O),a=Object(r.useContext)(v),t=e.proyectoActual,o=e.eliminarProyectoFn,c=a.tareasProyecto;if(null===t)return null;var l=t.nombre,s=t._id;return n.a.createElement(r.Fragment,null,n.a.createElement("h2",{className:"color3 mb-5"},"Proyecto: ",n.a.createElement("span",null,l," ",n.a.createElement("i",{className:"fas fa-tasks"}))),n.a.createElement("ul",{className:"listado-tareas overflow-auto pr-3",style:{height:"30vh"}},null===c||0===c.length?n.a.createElement("p",{className:"font-weight-bold text-muted text-center bg-light"},"No hay tareas"):c.map((function(e){return n.a.createElement(T,{key:e._id,tarea:e})}))),n.a.createElement("button",{onClick:function(){window.confirm("\xbfSeguro que quieres eliminar este proyecto?")&&o(s)},className:"btn btn-eliminar btn-primario btn-block"},"Eliminar proyecto ",n.a.createElement("i",{className:"fas fa-trash"})))}function x(){return n.a.createElement("div",{className:"contenedor-app"},n.a.createElement(h,null),n.a.createElement("div",{className:"seccion-principal"},n.a.createElement(N,null),n.a.createElement("main",null,n.a.createElement(A,null),n.a.createElement("div",{className:"contenedor-tareas"},n.a.createElement(C,null)))))}var k=t(2),w=t.n(k),_=t(5),F=t(17),S=function(e,a){switch(a.type){case"MOSTRAR_FORMULARIO_PROYECTO":return Object(d.a)({},e,{newProyectoForm:!0,mensaje:null});case"OCULTAR_FORMULARIO_PROYECTO":return Object(d.a)({},e,{newProyectoForm:!1,proyectoEditar:!1});case"OBTENER_PROYECTOS":return Object(d.a)({},e,{proyectos:a.payload});case"MOSTRAR_MENSAJE":return Object(d.a)({},e,{mensaje:a.payload});case"CREAR_PROYECTO":return Object(d.a)({},e,{proyectos:[a.payload].concat(Object(F.a)(e.proyectos)),proyectoActual:a.payload,newProyectoForm:!1});case"EDITAR_PROYECTO":return Object(d.a)({},e,{proyectoEditar:a.payload,newProyectoForm:!0,mensaje:null});case"PROYECTO_ACTUALIZADO":return Object(d.a)({},e,{newProyectoForm:!1,proyectoEditar:!1});case"PROYECTO_SELECCIONADO":return Object(d.a)({},e,{proyectoActual:a.payload,newProyectoForm:!1,mensaje:null});case"ELIMINAR_PROYECTO":return Object(d.a)({},e,{proyectos:e.proyectos.filter((function(e){return e._id!==a.payload})),proyectoActual:null,newProyectoForm:!1,proyectoEditar:!1,mensaje:null});default:return e}},P=t(34),I=t.n(P).a.create({baseURL:"https://mern-task-servidor-api.herokuapp.com/"}),L=function(e){var a=Object(r.useReducer)(S,{proyectos:[],proyectoActual:null,newProyectoForm:!1,proyectoEditar:!1,mensaje:null}),t=Object(E.a)(a,2),o=t[0],c=t[1],l=function(){var e=Object(_.a)(w.a.mark((function e(){var a,t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.get("/api/proyectos");case 3:a=e.sent,c({type:"OBTENER_PROYECTOS",payload:a.data.proyectos}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),t={msg:e.t0.response.data.errores[0].msg+".",categoria:"alert-danger"},i(t);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(_.a)(w.a.mark((function e(a){var t,r,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.post("/api/proyectos",a);case 3:t=e.sent,c({type:"CREAR_PROYECTO",payload:t.data.proyecto}),r={msg:t.data.msg+".",categoria:"alert-success"},i(r),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),n={msg:e.t0.response.data.errores[0].msg+".",categoria:"alert-danger"},i(n);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(a){return e.apply(this,arguments)}}(),u=function(){var e=Object(_.a)(w.a.mark((function e(a){var t,r,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.put("/api/proyectos/".concat(a._id),a);case 3:t=e.sent,c({type:"PROYECTO_ACTUALIZADO",payload:a}),l(),r={msg:t.data.msg+".",categoria:"alert-info"},i(r),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),n={msg:e.t0.response.data.errores[0].msg+".",categoria:"alert-danger"},i(n);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(a){return e.apply(this,arguments)}}(),i=function(e){c({type:"MOSTRAR_MENSAJE",payload:e})},m=function(){var e=Object(_.a)(w.a.mark((function e(a){var t,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.delete("/api/proyectos/".concat(a));case 3:t=e.sent,c({type:"ELIMINAR_PROYECTO",payload:a}),r={msg:t.data.msg+".",categoria:"alert-danger"},i(r),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.response),i({msg:"Hubo un error al eliminar.",categoria:"alert-danger"});case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(a){return e.apply(this,arguments)}}();return n.a.createElement(O.Provider,{value:{newProyectoForm:o.newProyectoForm,proyectoEditar:o.proyectoEditar,proyectos:o.proyectos,proyectoActual:o.proyectoActual,mensaje:o.mensaje,mostrarFormularioFn:function(){c({type:"MOSTRAR_FORMULARIO_PROYECTO"})},ocultarFormularioFn:function(){c({type:"OCULTAR_FORMULARIO_PROYECTO"})},obtenerProyectosFn:l,crearProyectoFn:s,proyectoEditarFn:function(e){c({type:"EDITAR_PROYECTO",payload:e})},actualizarProyectoFn:u,proyectoActualFn:function(e){c({type:"PROYECTO_SELECCIONADO",payload:e})},eliminarProyectoFn:m}},e.children)},M=function(e,a){switch(a.type){case"OBTENER_TAREAS":return Object(d.a)({},e,{tareasProyecto:a.payload});case"AGREGAR_TAREA":return Object(d.a)({},e,{tareasProyecto:[a.payload].concat(Object(F.a)(e.tareasProyecto))});case"MOSTRAR_MENSAJE_TAREA":return Object(d.a)({},e,{mensaje:a.payload});case"ELIMINAR_TAREA":return Object(d.a)({},e,{tareasProyecto:e.tareasProyecto.filter((function(e){return e._id!==a.payload}))});case"ACTUALIZAR_TAREA":return Object(d.a)({},e,{tareasProyecto:e.tareasProyecto.map((function(e){return e._id===a.payload._id?a.payload:e})),tareaEditar:null});case"EDITAR_TAREA":return Object(d.a)({},e,{tareaEditar:a.payload});default:return e}},U=function(e){var a=Object(r.useReducer)(M,{tareasProyecto:[],mensaje:null,tareaEditar:null}),t=Object(E.a)(a,2),o=t[0],c=t[1],l=function(){var e=Object(_.a)(w.a.mark((function e(a){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.get("/api/tareas",{params:{proyecto:a}});case 3:t=e.sent,c({type:"OBTENER_TAREAS",payload:t.data.tareas}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}(),s=function(){var e=Object(_.a)(w.a.mark((function e(a){var t,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.post("/api/tareas",a);case 3:t=e.sent,c({type:"AGREGAR_TAREA",payload:t.data.tarea}),r={msg:t.data.msg+".",categoria:"alert-success"},m(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(a){return e.apply(this,arguments)}}(),u=function(){var e=Object(_.a)(w.a.mark((function e(a,t){var r,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.delete("/api/tareas/".concat(a),{params:{proyecto:t}});case 3:r=e.sent,c({type:"ELIMINAR_TAREA",payload:a}),n={msg:r.data.msg+".",categoria:"alert-danger"},m(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(a,t){return e.apply(this,arguments)}}(),i=function(){var e=Object(_.a)(w.a.mark((function e(a){var t,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.put("/api/tareas/".concat(a._id),a);case 3:t=e.sent,c({type:"ACTUALIZAR_TAREA",payload:t.data.tarea}),r={msg:t.data.msg+".",categoria:"alert-info"},m(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(a){return e.apply(this,arguments)}}(),m=function(e){c({type:"MOSTRAR_MENSAJE_TAREA",payload:e})};return n.a.createElement(v.Provider,{value:{tareasProyecto:o.tareasProyecto,mensaje:o.mensaje,tareaEditar:o.tareaEditar,obtenerTareasFn:l,agregarTareaFn:s,eliminarTareaFn:u,obtenerTareaEditarFn:function(e){c({type:"EDITAR_TAREA",payload:e})},actualizarTareaFn:i}},e.children)},Y=function(e,a){switch(a.type){case"MOSTRAR_ALERTA":return{alerta:a.payload};case"OCULTAR_ALERTA":return{alerta:null};default:return e}},D=function(e){var a=Object(r.useReducer)(Y,{alerta:null}),t=Object(E.a)(a,2),o=t[0],c=t[1];return n.a.createElement(f.Provider,{value:{alerta:o.alerta,mostrarAlertaFn:function(e,a){c({type:"MOSTRAR_ALERTA",payload:{msg:e,categoria:a}}),setTimeout((function(){c({type:"OCULTAR_ALERTA"})}),3e3)}}},e.children)},G=function(e,a){switch(a.type){case"REGISTRO_EXITO":case"LOGIN_EXITO":return localStorage.setItem("token",a.payload.token),Object(d.a)({},e,{token:localStorage.getItem("token"),autenticado:!0,mensaje:null,cargando:!1});case"OBTENER_USUARIO":return Object(d.a)({},e,{autenticado:!0,usuario:a.payload,cargando:!1});case"CERRAR_SESION":case"LOGIN_ERROR":case"REGISTRO_ERROR":return localStorage.removeItem("token"),Object(d.a)({},e,{token:null,autenticado:null,usuario:null,mensaje:a.payload,cargando:!1});default:return e}},q=function(e){e?I.defaults.headers.common["x-auth-token"]=e:delete I.defaults.headers.common["x-auth-token"]},z=function(e){var a={token:localStorage.getItem("token"),autenticado:null,usuario:null,mensaje:null,cargando:!0},t=Object(r.useReducer)(G,a),o=Object(E.a)(t,2),c=o[0],l=o[1],s=function(){var e=Object(_.a)(w.a.mark((function e(a){var t,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.post("api/usuarios",a);case 3:t=e.sent,l({type:"REGISTRO_EXITO",payload:t.data}),u(),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),r={msg:e.t0.response.data.errores[0].msg,categoria:"alert-danger",value:e.t0.response.data.errores[0].value},l({type:"REGISTRO_ERROR",payload:r});case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}(),u=function(){var e=Object(_.a)(w.a.mark((function e(){var a,t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=localStorage.getItem("token"))&&q(a),e.prev=2,e.next=5,I.get("/api/auth");case 5:t=e.sent,l({type:"OBTENER_USUARIO",payload:t.data.usuario}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0),l({type:"LOGIN_ERROR"});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(_.a)(w.a.mark((function e(a){var t,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.post("api/auth",a);case 3:t=e.sent,l({type:"LOGIN_EXITO",payload:t.data}),u(),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),r={msg:e.t0.response.data.errores[0].msg,categoria:"alert-danger",value:e.t0.response.data.errores[0].value},l({type:"LOGIN_ERROR",payload:r});case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}();return n.a.createElement(i.Provider,{value:{token:c.token,autenticado:c.autenticado,usuario:c.usuario,mensaje:c.mensaje,cargando:c.cargando,registrarUsuarioFn:s,ObtenerUsuarioAutenticadoFn:u,iniciarSesionFn:m,cerrarSesionFn:function(){l({type:"CERRAR_SESION"})}}},e.children)},B=localStorage.getItem("token");B&&q(B);var J=function(){return n.a.createElement(L,null,n.a.createElement(U,null,n.a.createElement(D,null,n.a.createElement(z,null,n.a.createElement(l.a,null,n.a.createElement(s.d,null,n.a.createElement(s.b,{exact:!0,path:"/",component:b}),n.a.createElement(s.b,{exact:!0,path:"/nueva-cuenta",component:y}),n.a.createElement(m,{exact:!0,path:"/mis-proyectos",component:x})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.4a0bba9a.chunk.js.map